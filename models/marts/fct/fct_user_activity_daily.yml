version: 2

models:
  - name: fct_user_activity_daily
    description: "Fact table providing a daily snapshot of user activity metrics, specifically focused on the 7-day rolling window (WAU)."
    columns:
      - name: activity_id
        description: "Primary key of the table, generated by hashing user_id and reference_date."
        tests:
          - unique
          - not_null

      - name: user_id
        description: "Unique identifier for the user (Foreign Key)."
        tests:
          - not_null

      - name: reference_date
        description: "The date of the activity snapshot."
        tests:
          - not_null

      - name: total_tx_7d
        description: "Count of transactions in the last 7 days (including the reference date)."

      - name: is_7d_active
        description: "Flag indicating if the user had at least one transaction in the 7-day window."
        tests:
          - not_null
